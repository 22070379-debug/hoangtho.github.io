<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Product Management (OOP)</title>
    <script language="javascript">
        // 1. Định nghĩa Class Product
        class Product {
            constructor(code, name, price) {
                this.code = code;
                this.name = name;
                this.price = price;
            }
        }

        // Khởi tạo mảng để lưu trữ các đối tượng Product
        let products = [];
        
        // Tạo một đối tượng Product mẫu và thêm vào mảng ban đầu
        products.push(new Product("P01", "Yellow Rose", 15.5));
        products.push(new Product("P02", "Blue Rose", 20.0));
        products.push(new Product("P03", "Sun Flower", 10.0));

        // 2. Hàm Thêm Sản Phẩm mới vào mảng
        function display() {
            var f = document.f;
            var newCode = f.code.value;
            var newName = f.name.value;
            var newPrice = parseFloat(f.price.value);

            // Kiểm tra lỗi cơ bản (có thể mở rộng với RegEx)
            if (newCode === "" || newName === "" || isNaN(newPrice)) {
                alert("Please enter valid data for all fields.");
                return;
            }

            // Tạo đối tượng Product mới
            let newProduct = new Product(newCode, newName, newPrice);
            
            // Thêm vào mảng
            products.push(newProduct);
            
            // Cập nhật hiển thị danh sách
            show();
            
            // Xóa nội dung trên form sau khi thêm
            f.reset();
            f.code.focus();
        }

        // 3. Hàm Hiển thị Danh sách Sản Phẩm
        function show() {
            var content = document.getElementById("content");
            var tableHTML = "<h3>Product List</h3>";
            
            if (products.length === 0) {
                content.innerHTML = "No products found.";
                return;
            }

            tableHTML += "<table border='1' width='400' align='center'>";
            tableHTML += "<tr><th>Code</th><th>Name</th><th>Price</th></tr>";
            
            // Dùng vòng lặp for...of để duyệt qua mảng đối tượng
            for (let product of products) {
                tableHTML += "<tr>";
                tableHTML += "<td>" + product.code + "</td>";
                tableHTML += "<td>" + product.name + "</td>";
                tableHTML += "<td>" + product.price.toFixed(2) + "</td>"; // Định dạng 2 chữ số thập phân
                tableHTML += "</tr>";
            }
            
            tableHTML += "</table>";
            content.innerHTML = tableHTML;
        }
        
        // Gọi hàm show() khi trang vừa tải xong để hiển thị dữ liệu ban đầu
        window.onload = show;

    </script>
</head>
<body>
    <form name="f" align="center">
        <table border="0" align="center" width="400">
            <tr><td colspan="2" align="center"><b>PRODUCT MANAGEMENT</b></td></tr>
            <tr>
                <td align="right">Code:</td>
                <td><input type="text" name="code" size="20"></td>
            </tr>
            <tr>
                <td align="right">Name:</td>
                <td><input type="text" name="name" size="20"></td>
            </tr>
            <tr>
                <td align="right">Price:</td>
                <td><input type="text" name="price" size="20"></td>
            </tr>
            <tr>
                <td colspan="2" align="center">
                    <input type="button" value="Display" onClick="display()">
                </td>
            </tr>
        </table>
    </form>
    
    <div id="content" align="center">
        </div>
</body>
</html>